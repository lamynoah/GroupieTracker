<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>loading</title>
</head>

<body>
    <div> En attente que les autres joueurs rejoignent </div>
    <!-- <a href="/ptitBac.html"><button> Start Game</button></a> -->
    <button onclick="socket.send(JSON.stringify({ Id:getRoomId(), Start: true }))" disabled>Start all</button>
    {{template "socket" "loading"}}
    <script>
        socket.onopen = () => {
            console.log(JSON.stringify({ Id: getRoomId(), Start: false }))
            socket.send(JSON.stringify({ Id: getRoomId(), Start: false }))
            document.querySelector("button").removeAttribute("disabled")
        }
        socket.onmessage = msg => {
            console.log(msg.data)
            if (JSON.parse(msg.data) === "start game") {
                window.location.replace("http://localhost:8080/ptitBac" + window.location.search);
            }
        }
    </script>
</body>

</html>