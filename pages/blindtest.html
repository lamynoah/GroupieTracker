<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <title>BlindTest</title>
</head>
<body>
    <a>
        <iframe id="spotifyPlayer" width="100%" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
    </a>
    <form>
        <label for="userInput"> Title:</label>
        <input type="text" id="userInput" name="userInput">
        <button type="submit">Submit</button>
    </form>
    <script src="https://open.spotify.com/embed/iframe-api/v1" async>
    </script>
    <script>
       function updateSpotifyTrack() {
        fetch("/getTrackID")
        .then(response => response.text())
        .then(trackID => {
            var iframe = document.getElementById("spotifyPlayer");
            iframe.src = "https://open.spotify.com/embed/track/" + trackID + "?autoplay=true";
            // setTimeout(function() {
            //     iframe.src = "";
            // }, Math.floor(Math.random() * (15000 - 5000 + 1)) + 5000);
        })
        .catch(error => {
            console.error("Error fetching track ID:", error);
        });
    }
    updateSpotifyTrack();
    // setInterval(updateSpotifyTrack, 30000)
    </script>
    {{template ""}}
</html>